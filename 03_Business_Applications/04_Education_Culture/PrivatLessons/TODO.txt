/**
   * ============================================================================
   * TODO LIST PROGETTO - LESSON MANAGEMENT SYSTEM (TEACHER, STUDENT, ADMIN)
   * ============================================================================
   * 
   * ============================================================================
   * PARTE 1: AGGIORNAMENTO ENTITÀ ESISTENTI
   * ============================================================================
   *
   * --- 1.1 Teacher.java ---
   *   [FATTO] Aggiungere campo per relazione padre-figli con Lesson
   *   [FATTO] Aggiungere attributo: List<Lesson> lessons = new ArrayList<>();
   *   [FATTO] Aggiungere getter: public List<Lesson> getLessons()
   *   [FATTO] Aggiungere setter: public void setLessons(List<Lesson> lessons)
   *
   * --- 1.2 Student.java ---
   *   [FATTO] Aggiungere campo per relazione padre-figli con Lesson
   *   [FATTO] Aggiungere attributo: List<Lesson> lessons = new ArrayList<>();
   *   [FATTO] Aggiungere getter: public List<Lesson> getLessons()
   *   [FATTO] Aggiungere setter: public void setLessons(List<Lesson> lessons)
   *
   * ============================================================================
   * PARTE 2: NUOVE ENTITÀ
   * ============================================================================
   *
   * --- 2.1 Admin.java ---
   * [FATTO] Creare classe Admin extends User 
   *   - Attributi base: String email, String password (hashata), UserStatus status
   *   - Attributo aggiuntivo: LocalDate dateLastPasswordChange
   *   - Costante: private static final int PASSWORD_CHANGE_WEEKS = 2;
   * 
   * [FATTO] Implementare costruttori
   *   
   * [FATTO] Implementare metodo needsPasswordChange()
   *  
   * [FATTO] Implementare getter/setter
   *  
   * --- 2.2 Lesson.java ---
   * [FATTO] Classe Lesson extends Entity già esistente
   *   [FATTO] Attributi: LocalDate date, int hour, Student student, Teacher teacher, int price
   *   [FATTO] Costruttori implementati
   *   [FATTO] Getter/setter implementati
   *   [FATTO] Validazione con getErrors() implementata
   *   [FATTO] hashCode() e equals() implementati
   *
   * ============================================================================
   * PARTE 3: REPOSITORY INTERFACES
   * ============================================================================
   *
   * --- 3.1 AdminRepository.java ---
   * [FATTO] Creare interfaccia AdminRepository con metodi CRUD
   *   - login(String email, String password)
   *   - changePassword(int id, String oldPassword, String newPassword)
   *   - existsAnyAdmin()
   *   - findAll()
   *   - findById(int id)
   *   - findWhere(String condition)
   *   - insert(Admin admin)
   *   - update(Admin admin)
   *   - delete(int id)
   *   - changeStatus(int id, UserStatus newStatus)
   *
   * --- 3.2 TeacherRepository.java ---
   * [FATTO] Interfaccia TeacherRepository esistente con metodi base
   *   [FATTO] login(String email, String plainPassword)
   *   [FATTO] changePassword(int id, String oldPassword, String newPassword)
   *   [FATTO] findAll()
   *   [FATTO] findById(int id)
   *   [FATTO] findById(int id, boolean complete) - per lazy/eager loading
   *   [FATTO] findWhere(String condition)
   *   [FATTO] findTeacherBySubject(String subject)
   *   [FATTO] insert(Teacher teacher)
   *   [FATTO] update(Teacher teacher)
   *   [FATTO] delete(int id)
   *
   
   
   
   
   
   
   
   * [TODO] Aggiungere metodi per gestione lezioni
   *   - findLessonsByTeacherId(int teacherId)
   *   - findNextWeekLessonsByTeacherId(int teacherId)
   *   - calculateEarningsByTeacherIdAndPeriod(int teacherId, LocalDate startDate, LocalDate endDate)
   *   - changeStatus(int id, UserStatus newStatus)
   *
   
   
   
   
   
   
   
   
   
   * --- 3.3 StudentRepository.java ---
   * [FATTO] Interfaccia StudentRepository esistente con metodi base
   *   [FATTO] login(String email, String plainPassword)
   *   [FATTO] changePassword(int id, String oldPassword, String newPassword)
   *   [FATTO] findAll()
   *   [FATTO] findById(int id)
   *   [FATTO] findById(int id, boolean complete) - per lazy/eager loading
   *   [FATTO] findWhere(String condition)
   *   [FATTO] insert(Student student)
   *   [FATTO] update(Student student)
   *   [FATTO] delete(int id)
   *
   
   
   
   
   
   * [TODO] Aggiungere metodi per gestione lezioni e ricerca teacher
   *   FATTO -  findTeachersBySubject(String subject) -> può usare TeacherRepository.findTeacherBySubject() --> IN TEACHER
   
   
   
   TODO --> PRINT STORICO LEZIONI PER STUDENTE CON TOTALE SPESO 
   *   TODO  - findLessonsByStudentId(int studentId) --> IN STUDENT - DA FARE
   *   TODO  - calculateTotalSpentByStudentId(int studentId)  
   
   *   FATTO - changeStatus(int id, UserStatus newStatus)
   *
   
   
   
   
   
   
   
   * --- 3.4 LessonRepository.java ---
   * [FATTO] Interfaccia LessonRepository esistente con metodi base
   *   [FATTO] findAll()
   *   [FATTO] findWhere(String condition)
   *   [FATTO] findById(int id)
   *   [FATTO] insert(Lesson lesson)
   *   [FATTO] update(Lesson lesson)
   *   [FATTO] delete(int id)
   *
   * [FATTO] Aggiungere metodi per statistiche admin
   *   - calculateEarningsByTeacherLast30Days(int teacherId)
   *   - calculateEarningsBySubjectLast30Days(String subject)
   *
   * ============================================================================
   * PARTE 4: REPOSITORY SQL IMPLEMENTATIONS
   * ============================================================================
   *
   * --- 4.1 AdminRepositorySQL.java ---
   * [FATTO] Creare classe AdminRepositorySQL extends SQLEntityRepository<Admin>
   * [FATTO] Implementare tutti i metodi di AdminRepository
   *   - getInsertCmd(Admin x)
   *   - getUpdateCmd(Admin newVersion)
   *   - rowToX(ResultSet rs)
   *   - login(String email, String plainPassword)
   *   - changePassword(int id, String oldPassword, String newPassword)
   *   - existsAnyAdmin()
   *   - changeStatus(int id, UserStatus newStatus)
   *
   * --- 4.2 TeacherRepositorySQL.java ---
   * [FATTO] Classe TeacherRepositorySQL esistente con metodi base
   *   [FATTO] getInsertCmd(Teacher x)
   *   [FATTO] getUpdateCmd(Teacher newVersion)
   *   [FATTO] rowToX(ResultSet rows)
   *   [FATTO] findWhere(String cond) - con caricamento eager delle lezioni
   *   [FATTO] findById(int id, boolean complete) - per lazy/eager loading
   *   [FATTO] findByIdNaked(int id) - per lazy loading
   *   [FATTO] login(String email, String plainPassword)
   *   [FATTO] changePassword(int id, String oldPassword, String newPassword)
   *   [FATTO] findTeacherBySubject(String subject) - con LIKE per CSV
   *
   
   
   
   
   
   * [TODO] Implementare metodi aggiuntivi per lezioni
   *   - findLessonsByTeacherId(int teacherId) --> MI SERVE PER LO STORICO (PRINT STORICO LEZIONI) 
   
   *   - findNextWeekLessonsByTeacherId(int teacherId) --> MI SERVE FARE GETNEXTLESSONS() TODO
   
   *   - calculateEarningsByTeacherIdAndPeriod(int teacherId, LocalDate startDate, LocalDate endDate) --> STAMPA_GUADAGNO_MEDIO() TODO 
   *   - FATTO changeStatus(int id, UserStatus newStatus)
   *
   
   
   
   
   
   
   
   * --- 4.3 StudentRepositorySQL.java ---
   * [FATTO] Classe StudentRepositorySQL esistente con metodi base
   *   [FATTO] getInsertCmd(Student x)
   *   [FATTO] getUpdateCmd(Student newVersion)  
   *   [FATTO] rowToX(ResultSet rows)
   *   [FATTO] findWhere(String cond) - con caricamento eager delle lezioni
   *   [FATTO] findById(int id, boolean complete) - per lazy/eager loading
   *   [FATTO] findByIdNaked(int id) - per lazy loading
   *   [FATTO] login(String email, String plainPassword)
   *   [FATTO] changePassword(int id, String oldPassword, String newPassword)
   *
   * [FATTO] Completare implementazione getUpdateCmd(Student newVersion)

   * --- 4.4 LessonRepositorySQL.java ---
   * [FATTO] Creare classe LessonRepositorySQL extends SQLEntityRepository<Lesson>
   * [FATTO] Implementare tutti i metodi di LessonRepository
   *   - getInsertCmd(Lesson x)
   *   - getUpdateCmd(Lesson newVersion)
   *   - rowToX(ResultSet rs) - deve caricare teacher e student completi
   *   - calculateEarningsByTeacherLast30Days(int teacherId)
   *   - calculateEarningsBySubjectLast30Days(String subject)
   *
   * ============================================================================
   * PARTE 5: CONTROLLERS
   * ============================================================================
   *
   * --- 5.1 Main.java (Entry Point) ---
   * [TODO] Creare metodo main che direziona verso i 3 entry point
   *   - Mostrare menu: 1. Admin, 2. Teacher, 3. Student, 0. Exit
   *   - Switch su scelta:
   *     * case 1: AdminMain.run()
   *     * case 2: TeacherMain.run()
   *     * case 3: StudentMain.run()
   *     * case 0: exit
   *
   * --- 5.2 AdminMain.java ---
   * [FATTO] Creare classe AdminMain
   * [FATTO] Gestire login admin
   *   - Metodo login() che chiama adminRepo.login(email, password)
   *   - Max 3 tentativi di login, return null se fallisce
   *   - Se needsPasswordChange() == true, forzare cambio password prima di procedere
   *
   * [FATTO] Implementare menu admin
   *   - 1. Inserire nuovo Teacher (chiamare teacherRepo.insert())
   *   - 2. Inserire nuovo Student (chiamare studentRepo.insert())
   *   - 3. Inserire nuovo Admin (chiamare adminRepo.insert())
   *   - 4. Cambiare status Teacher (chiamare teacherRepo.changeStatus())
   *   - 5. Cambiare status Student (chiamare studentRepo.changeStatus())
   *   - 6. Cambiare status Admin (chiamare adminRepo.changeStatus())
   *   - 7. Calcolare guadagno ultimi 30 giorni per Teacher (chiamare lessonRepo.calculateEarningsByTeacherLast30Days())
   *   - 8. Calcolare guadagno ultimi 30 giorni per materia (chiamare lessonRepo.calculateEarningsBySubjectLast30Days())
   *   - 9. Cambiare password (chiamare adminRepo.changePassword())
   *   - 0. Logout
   *
   * [FATTO] Implementare insertFirstAdmin() [metodo statico o separato]
   *   - Verificare se esistono admin con adminRepo.existsAnyAdmin()
   *   - Se nessun admin esiste, permettere creazione manuale del primo admin senza login
   *   - Chiedere email, password, conferma password
   *   - Inserire con adminRepo.insert() e impostare dateLastPasswordChange = LocalDate.now()
   *
   * --- 5.3 TeacherMain.java ---
   * [FATTO] Creare classe TeacherMain
   * [FATTO] Gestire login teacher
   *   - Metodo login() che chiama teacherRepo.login(email, password)
   *   - Max 3 tentativi di login, return null se fallisce
   *
   * [TODO] Implementare menu teacher
   *   - 1. Storico lezioni (chiamare teacherRepo.findLessonsByTeacherId())
   *   - 2. Lezioni della prossima settimana (chiamare teacherRepo.findNextWeekLessonsByTeacherId())
   *   - 3. Stampare guadagno per periodo (chiedere startDate e endDate, chiamare teacherRepo.calculateEarningsByTeacherIdAndPeriod())
   *   - 4. Cambiare password (chiamare teacherRepo.changePassword())
   *   - 0. Logout
   *
   STAMPARE CON LE VIEW --> TODO
   
   
   
   
   
   
   * --- 5.4 StudentMain.java ---
   * [FATTO] Creare classe StudentMain
   * [FATTO] Gestire login student
   *   - Metodo login() che chiama studentRepo.login(email, password)
   *   - Max 3 tentativi di login, return null se fallisce
   *
   * [FATTO] Implementare menu student
   *   - 1. Cercare teacher per materia (chiamare studentRepo.findTeachersBySubject() o teacherRepo.findTeacherBySubject())
   *   - 2. Prenotare lezione (minimo dal giorno dopo: date >= LocalDate.now().plusDays(1))
   *     * Chiedere teacher_id, date, hour
   *     * Creare Lesson(0, date, hour, loggedStudent, teacher, teacher.getPricePerLesson())
   *     * Chiamare lessonRepo.insert()
   *   - 3. Storico lezioni (chiamare studentRepo.findLessonsByStudentId())
   *     * Stampare lista lezioni
   *     * Alla fine stampare totale speso (chiamare studentRepo.calculateTotalSpentByStudentId())
   *   - 4. Stampare ricevuta lezione in HTML
   *     * Chiedere lesson_id
   *     * Chiamare lessonRepo.findById(lesson_id)
   *     * Generare file HTML con dati lezione (date, hour, teacher, price)
   *     * Salvare come "ricevuta_lesson_[id].html"
   *   - 5. Cambiare password (chiamare studentRepo.changePassword())
   *   - 0. Logout
   
   
   
   
   TODO
   *   STAMPARE CON LE VIEW --> TODO

   * ============================================================================
   * PARTE 6: CONTEXT E DEPENDENCY INJECTION
   * ============================================================================
   *
   * --- 6.1 Context.java ---
   * [FATTO] Configurare Context per dependency injection
   *   - Registrare AdminRepositorySQL con Context
   *   - Registrare TeacherRepositorySQL con Context
   *   - Registrare StudentRepositorySQL con Context
   *   - Registrare LessonRepositorySQL con Context
   *   - Utilizzare Context.getDependency() nei controller per recuperare repository

   */
